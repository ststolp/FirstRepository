<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
        <script>
         var letters = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y"];
            var matrices = [[[],[],[],[],[]],[[],[],[],[],[]],[[],[],[],[],[]],[[],[],[],[],[]],[[],[],[],[],[]],[[],[],[],[],[]],[[],[],[],
            [],[]],[[],[],[],[],[]]];
        </script>
    </head>
    <body>
        <h1>This is the radius of the largest circle</h1>
        <p id="demo"></p>
        <br><br><br>

        <p>Question 2 calculator</p>
        <input id="prob2" type="text" size="100">
        <button onclick="calc2()">Calculate</button><br>
        <p id="calcAns"></p>

        <h1>Prefix Calculator</h1>
        <input id="calc3Input" type="text" size="100" >
        <button onclick="calc3()" >Calculate</button><br>
        <p id="calc3Ans"></p>

        <p>Input a list</p>
        <input id="cdr" type="text" size="100">
        <button onclick="car()">Get first Element</button><br>
        <p id="cdrAns"></p>

        <p>Input a list</p>
        <input id="prob4" type="text" size="100">
        <button onclick="cdr()">Get all elements but the first</button><br>
        <p id="prob4Ans"></p>

        <p>Input a list...</p>
        <input id="list" type="text" size="100"><br>
        <p>... then an element.</p>
        <input id="element" type="text" size="100">
        <button onclick="prob5onclick()">Put element at the beginning of the list</button><br>
        <p id="prob5Ans"></p>

        <h1>Phillips cipher</h1>
        <p>Type a key word</p>
        <input id="keyWord" type="text" size="50">
        <button onclick="makematrices()">Generate Matrices</button><br>
        <p>Input plaintext</p>
        <input id="phillipsPlain" type="text" size="200">
        <button onclick="PhillipsEncrypt()">Generate ciphertext</button><br>
        <p id="ciphertext"></p>
        <p>Input ciphertext</p>
        <input id="phillipsCipher" type="text" size="100">
        <button onclick="PhillipsDecrypt()">Decrypt ciphertext</button><br>
        <p id="PhillipsDecrypted"></p>

        <script>
         function makematrices() {
            var keyWord = document.getElementById("keyWord").value;
            keyWord = keyWord.toUpperCase();
                 for (var i = 0; i < 25; i++ ) {
                     var regExp = new RegExp(letters[i]); 
                    if (regExp.test(keyWord)) { delete letters[i]; }
                 }
             for (var a = 0; a < keyWord.length; a++) {
                 for (var b = 0; b < keyWord.length; b++) {
                     if (a != b) {
                         if (keyWord[a] == keyWord[b]) {
                             if (a < b) { keyWord = keyWord.replace(keyWord[b], ""); }
                             else { keyWord = keyWord.replace(keyWord[a], ""); }
                        }
                     }
                 }
             }
             for(var i = 0; i < keyWord.length; i++) {
                 if(keyWord[i] == " ") {  keyWord = keyWord.replace(keyWord[i], "");}
             }
               var r = 0;
             for ( var k = 0; k < keyWord.length; r++) {
                  if ((r % 2) == 0) { 
                      for (var c = 0; (c < 5) && (k < keyWord.length); c++, k++) {
                          matrices[0][r][c] = keyWord[k];
                      }
                  } else {
                       for (var c = 4; (c > -1) && (k < keyWord.length); c--, k++)
                         matrices[0][r][c] = keyWord[k];
                  }
             }
                r--;
            var a = 0;
             if ((r % 2) == 0) {
                 for (; c < 5; ) {
                     //alert("filling row " + c);
                     if(letters[a] === undefined) { a++; }
                     else {
                         matrices[0][r][c] = letters[a];
                         a++;
                         c++;
                     }
                    }
             } else {
                 for (; c > -1; ) {
                     if (letters[a] === undefined) { a++; }
                     else {
                         matrices[0][r][c] = letters[a];
                         a++;
                         c--;
                     }
                 }
        }
      r++;
             for (  ; a < letters.length; r++) {
                 if ((r % 2) == 0) {
                   for (var c = 0; (c < 5) && (a < letters.length); ) {
                       if (letters[a] === undefined) { a++; }
                       else {
                           matrices[0][r][c] = letters[a];
                           a++;
                           c++;
                       }
                 }
                 } else {
                     for (var c = 4; (c > -1) && (a < letters.length); ) {
                         if (letters[a] === undefined) { a++;}
                         else {
                             matrices[0][r][c] = letters[a];
                             c--;
                             a++;
                         }
                     }
                 }
             }

            //m: matrix, sa: switch A, sb: switch B,  r: row
             for (var m = 1, sa = 0, sb = 1; sb < 4 ; m++, sa++, sb++) {
                 for (var r = 0; r < 5; r++) 
                     matrices[m][r] = matrices[m - 1][r];
                 var tempA = matrices[m][sa];
                 matrices[m][sa] = matrices[m][sb];
                 matrices[m][sb] = tempA;
             }

            for (var sb = 1, sa = 0; sb < 5 ; m++, sa++, sb++) {
                 for (var r = 0; r < 5; r++) 
                     matrices[m][r] = matrices[m - 1][r];
                 var tempA = matrices[m][sa];
                 matrices[m][sa] = matrices[m][sb];
                 matrices[m][sb] = tempA;
            }
         }
         function PhillipsEncrypt() {
             var plaintext = document.getElementById("phillipsPlain").value;
            for(var i = 0; i < plaintext.length; i++) {
               if(plaintext[i] == " ") { plaintext = plaintext.replace(plaintext[i], ""); }
            }
            plaintext = plaintext.toUpperCase();
             var nc = 0, nr = 0, ct = "";
             for (var m = 0, pt = 0; pt < plaintext.length ; m++) {           //loop through all the matrices
                 if (m == 7) {m = 0;}
                 for (var i = 0; i < 5 && pt < plaintext.length; ) {                       // encrypt 5 letters with every matrix
                     for (var r = 0; r < 5 && i < 5; r++) {
                         for (var c = 0; c < 5 && pt < plaintext.length && i < 5; c++) {
                             if(plaintext[pt] === undefined) {
                                 pt++;
                                 c--;
                             } else {
                             if (matrices[m][r][c] == plaintext[pt]) {
                                 i++;
                                 nc = c + 1;
                                 nr = r + 1;
                                 if (nc == 5) {  nc = 0; }
                                 if (nr == 5){   nr = 0; }
                                 ct = ct + matrices[m][nr][nc];
                                 pt++;
                                 c = 5;
                                 r = 5;
                             }
                             }
                         }
                     }
                 }
             }
            document.getElementById("ciphertext").value = ct;
            document.getElementById("ciphertext").innerHTML = ct;
         }
         function PhillipsDecrypt() {
             var ciphertext = document.getElementById("phillipsCipher").value;
             ciphertext = ciphertext.toUpperCase();
            for(var i = 0; i < ciphertext.length; i++) {
               if(ciphertext[i] == " ") 
                  ciphertext = ciphertext.replace(ciphertext[i], "");
            }
             var pt = "", nc = 0, nr = 0;
             for (var m = 0, ct = 0; ct < ciphertext.length ; m++) {           //loop through all the matrices
                 if (m == 7) {m = 0;}
                 for (var i = 0; i < 5 && ct < ciphertext.length; ) {                       // encrypt 5 letters with every matrix
                     for (var r = 0; r < 5 && i < 5; r++) {
                         for (var c = 0; c < 5 && ct < ciphertext.length && i < 5; c++) {
                             if (ciphertext[ct] == " ") {
                                 ct++;
                                 c--;
                                 pt = pt + " ";
                             } else {
                             if (matrices[m][r][c] == ciphertext[ct]) {
                                 i++;
                                 nc = c - 1;
                                 nr = r - 1;
                                 if (nc == -1) {  nc = 4; }
                                 if (nr == -1){   nr = 4; }
                                 pt = pt + matrices[m][nr][nc];
                                 ct++;
                                 c = 5;
                                 r = 5;
                             }
                             }
                         }
                     }
                 }
             }
                 document.getElementById("PhillipsDecrypted").innerHTML = pt; 
         }
         function radius(r, n) {
             var cos = Math.cos(3.14159265359/n);
             r = r / cos;
             //alert("r=" + r);
             n++;
             //alert("n=" + n);
             if (n <= 9600) {
                 r = radius(r, n);
             }
             //   alert("r=" + r);
             return r;
         }

         function car() {
             //             alert("in car");
             var string = document.getElementById("cdr").value;
             //           alert("string= " + string);
             var arr = string.split(" ");
             var first = arr[0];
             //          alert("first= " + first);
             document.getElementById("cdrAns").innerHTML = first;
         }

         function cdr() {
             var string = document.getElementById("prob4").value;
             var arr = string.split(" ");
             //arr[0] = "";
             arr.shift();
             var newString = arr[0];
             for (var i = 1; i < arr.length ; i++) {
                 newString = newString + " " + arr[i];
             }
             document.getElementById("prob4Ans").innerHTML = newString;
         }

         function cons(list, element) {
             var arr = list.split(" ");
             //var newArray = {element};
             //newArray = newArray + arr;
             arr.unshift(element);
             var newList = arr[0];
             for (var i = 1; i < arr.length; i++) {
                 newList = newList + " " + arr[i];
             }
             return newList;
         }

         function prob5onclick() {
             var list = document.getElementById("list").value;
             var element = document.getElementById("element").value;
             document.getElementById("prob5Ans").innerHTML = cons(list, element);
         }

         function calc2() {
             var string = document.getElementById("prob2").value;
             var arr = string.split(" ");
             var ans = 0;
             for (var i = 0; i < arr.length;i++ ) {
                 if (arr[i] == '+') {

                     for (var b = 0; (b < arr.length ) && (b + 1 < arr.length) && (arr[b] != '+'); b += 2) {
                         //           alert("(before) ans = " + ans + "b = " + b);
                         arr[b] = parseInt(arr[b]);
                         //ans = ans + arr[b];
                         //         alert("ans = " + ans);
                         if((arr[b + 1] != '+')){
                             arr[b + 1] = parseInt(arr[b + 1]);
                             ans = ans + arr[b] + arr[b + 1];
                             //             alert("next ans = " + ans + "b + 1 = " + (b + 1) + "i = " + i + "arr[b + 1] = " + arr[b + 1]);
                         }
                         if (arr[b + 1] == '+') {
                             ans = ans + arr[b];
                             //            alert("next ans = " + ans + "b + 1 = " + (b + 1) + "i = " + i + "arr[b + 1] = " + arr[b + 1]);
                         }
                     }
                 }
             }
             document.getElementById("calcAns").innerHTML = ans;
         }
         function calc3() {
             var string = document.getElementById("calc3Input").value;
             var arr = string.split(" ");
             var ans = 0;
             for (var i = 0; i < arr.length; i++) {
                 if ((arr[i] != '+') && (arr[i] != '-') && (arr[i] != '*') && (arr[i] != '/')) 
                     arr[i] = parseInt(arr[i]);
             }
             for (var i = arr.length - 1; i >= 0; i--) {

                 if ((arr[i] == '+') || (arr[i] == '-') || (arr[i] == '*') || (arr[i] == '/')) {
                     switch(arr[i]) {
                         case '+':
                             {
                                 var ans = arr[i + 1] + arr[i + 2];
                                 arr.splice(i, 3, ans);
                             }
                             break;
                         case '-':
                             {
                                 var ans = arr[i + 2] - arr[i + 1];
                                 arr.splice(i, 3, ans);
                             }
                             break;
                         case '*':
                             {
                                 var ans = arr[i + 2] * arr[i + 1];
                                 arr.splice(i, 3, ans);
                             }
                             break;
                         case '/':
                             {
                                 var ans = arr[i + 2] / arr[i + 1];
                                 arr.splice(i, 3, ans);
                             }
                             break;
                     }
                 }
             }
             document.getElementById("calc3Ans").innerHTML = ans;
         }
         document.getElementById("demo").innerHTML = radius(1, 3);
        </script>
    </body>
</html>
